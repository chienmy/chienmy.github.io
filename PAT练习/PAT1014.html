<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>1014 Waiting In Line | Unknown Page</title>
    <meta name="generator" content="VuePress 1.8.2">
    
    <meta name="description" content="404">
    
    <link rel="preload" href="/assets/css/0.styles.2aaeaa15.css" as="style"><link rel="preload" href="/assets/js/app.20b2d5c1.js" as="script"><link rel="preload" href="/assets/js/4.3d4435c2.js" as="script"><link rel="preload" href="/assets/js/17.f2bb4291.js" as="script"><link rel="prefetch" href="/assets/js/10.dbfe23b4.js"><link rel="prefetch" href="/assets/js/11.c03d523b.js"><link rel="prefetch" href="/assets/js/12.b18b8cab.js"><link rel="prefetch" href="/assets/js/13.4d13f343.js"><link rel="prefetch" href="/assets/js/14.a732792c.js"><link rel="prefetch" href="/assets/js/15.68bfca7e.js"><link rel="prefetch" href="/assets/js/16.4ad6b832.js"><link rel="prefetch" href="/assets/js/18.d80c0a21.js"><link rel="prefetch" href="/assets/js/19.ba69fd38.js"><link rel="prefetch" href="/assets/js/2.4f6c7076.js"><link rel="prefetch" href="/assets/js/20.f744bb2a.js"><link rel="prefetch" href="/assets/js/21.c6a8116a.js"><link rel="prefetch" href="/assets/js/22.dda03136.js"><link rel="prefetch" href="/assets/js/23.605e317c.js"><link rel="prefetch" href="/assets/js/3.a4197e99.js"><link rel="prefetch" href="/assets/js/5.d481feb1.js"><link rel="prefetch" href="/assets/js/6.acb57dd8.js"><link rel="prefetch" href="/assets/js/7.9b3c79b3.js"><link rel="prefetch" href="/assets/js/8.2ceb428a.js"><link rel="prefetch" href="/assets/js/9.ea563b07.js">
    <link rel="stylesheet" href="/assets/css/0.styles.2aaeaa15.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="layout-body"><div class="markdown-body content__default"><h1 id="_1014-waiting-in-line"><a href="#_1014-waiting-in-line" class="header-anchor">#</a> 1014 Waiting In Line</h1> <blockquote><p>Suppose a bank has <em>N</em> windows open for service. There is a yellow line in front of the windows which devides the waiting area into two parts. The rules for the customers to wait in line are:</p> <ul><li>The space inside the yellow line in front of each window is enough to contain a line with <em>M</em> customers. Hence when all the <em>N</em> lines are full, all the customers after (and including) the (<em>N</em> * <em>M</em>+1)st one will have to wait in a line behind the yellow line.</li> <li>Each customer will choose the shortest line to wait in when crossing the yellow line. If there are two or more lines with the same length, the customer will always choose the window with the smallest number.</li> <li>Customer <em>i</em> will take T<em>i</em> minutes to have his/her transaction processed.</li> <li>The first <em>N</em> customers are assumed to be served at 8:00am.</li></ul> <p>Now given the processing time of each customer, you are supposed to tell the exact time at which a customer has his/her business done.</p> <p>For example, suppose that a bank has 2 windows and each window may have 2 customers waiting inside the yellow line. There are 5 customers waiting with transactions taking 1, 2, 6, 4 and 3 minutes, respectively. At 08:00 in the morning, Customer <em>1</em> is served at window<em>1</em> while Customer <em>2</em> is served at window<em>2</em>. Customer <em>3</em>  will wait in front of window<em>1</em> and Customer <em>4</em> will wait in front of window<em>2</em>. Customer <em>5</em>  will wait behind the yellow line.</p> <p>At 08:01, customer <em>1</em> is done and customer <em>5</em> enters the line in front of window<em>1</em> since that line seems shorter now. Customer <em>2</em> will leave at 08:02, customer <em>4</em> at 08:06, customer <em>3</em>  at 08:07, and finally customer <em>5</em>  at 08:10.</p> <h3 id="input-specification"><a href="#input-specification" class="header-anchor">#</a> Input Specification:</h3> <p>Each input file contains one test case. Each case starts with a line containing 4 positive integers: <em>N</em> (≤20, number of windows), <em>M</em> (≤10, the maximum capacity of each line inside the yellow line), <em>K</em> (≤1000, number of customers), and <em>Q</em> (≤1000, number of customer queries).</p> <p>The next line contains <em>K</em> positive integers, which are the processing time of the <em>K</em> customers.</p> <p>The last line contains <em>Q</em> positive integers, which represent the customers who are asking about the time they can have their transactions done. The customers are numbered from 1 to <em>K</em>.</p> <h3 id="output-specification"><a href="#output-specification" class="header-anchor">#</a> Output Specification:</h3> <p>For each of the <em>Q</em> customers, print in one line the time at which his/her transaction is finished, in the format <code>HH:MM</code> where <code>HH</code> is in [08, 17] and <code>MM</code> is in [00, 59]. Note that since the bank is closed everyday after 17:00, for those customers who cannot be served before 17:00, you must output <code>Sorry</code> instead.</p></blockquote> <h2 id="description"><a href="#description" class="header-anchor">#</a> Description</h2> <p>N条队伍正好用N个队列表示，先将黄线等待范围内的位置占满，然后每次从所有的队首中找一个最先完成的出队，后续元素入队。这时记录出队节点的完成时间，注意如果节点开始时已经超过17:00则不记录。</p> <h2 id="solution"><a href="#solution" class="header-anchor">#</a> Solution</h2> <div class="language-cpp extra-class"><pre class="language-cpp"><code><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;vector&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;queue&gt;</span></span>

<span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">int</span> N<span class="token punctuation">,</span> M<span class="token punctuation">,</span> K<span class="token punctuation">,</span> Q<span class="token punctuation">;</span>
    cin <span class="token operator">&gt;&gt;</span> N <span class="token operator">&gt;&gt;</span> M <span class="token operator">&gt;&gt;</span> K <span class="token operator">&gt;&gt;</span> Q<span class="token punctuation">;</span>
    vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">&gt;</span> <span class="token function">times</span><span class="token punctuation">(</span>K<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> K<span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        cin <span class="token operator">&gt;&gt;</span> times<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">&gt;</span> <span class="token function">queries</span><span class="token punctuation">(</span>Q<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> Q<span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        cin <span class="token operator">&gt;&gt;</span> queries<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 保存N个窗口前队伍的情况</span>
    vector<span class="token operator">&lt;</span>queue<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">&gt;&gt;</span> <span class="token function">queues</span><span class="token punctuation">(</span>N<span class="token punctuation">,</span> queue<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 保存每个队伍已经完成的顾客总用时</span>
    vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">&gt;</span> <span class="token function">queueSum</span><span class="token punctuation">(</span>N<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 保存每个顾客的完成时间</span>
    vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">&gt;</span> <span class="token function">endTime</span><span class="token punctuation">(</span>K<span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> K<span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 前N*M个直接分别加入队列</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>i <span class="token operator">&lt;</span> N <span class="token operator">*</span> M<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">int</span> index <span class="token operator">=</span> i <span class="token operator">%</span> N<span class="token punctuation">;</span>
            queues<span class="token punctuation">[</span>index<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            <span class="token comment">// 首先选择出一个能在最短时间内出现空位的队伍，最短时间是相对于黄线内排满的时间算的</span>
            <span class="token keyword">int</span> minValue <span class="token operator">=</span> queueSum<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">+</span> times<span class="token punctuation">[</span>queues<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">front</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
            <span class="token keyword">int</span> minIndex <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
            <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> j <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> N<span class="token punctuation">;</span> <span class="token operator">++</span>j<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>queueSum<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">+</span> times<span class="token punctuation">[</span>queues<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">front</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token operator">&lt;</span> minValue<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    minValue <span class="token operator">=</span> queueSum<span class="token punctuation">[</span>j<span class="token punctuation">]</span> <span class="token operator">+</span> times<span class="token punctuation">[</span>queues<span class="token punctuation">[</span>j<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">front</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
                    minIndex <span class="token operator">=</span> j<span class="token punctuation">;</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
            <span class="token comment">// 这时的时间在五点之前才会记录完成时间</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>queueSum<span class="token punctuation">[</span>minIndex<span class="token punctuation">]</span> <span class="token operator">&lt;</span> <span class="token number">540</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                endTime<span class="token punctuation">[</span>queues<span class="token punctuation">[</span>minIndex<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">front</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token operator">=</span> queueSum<span class="token punctuation">[</span>minIndex<span class="token punctuation">]</span> <span class="token operator">+</span> times<span class="token punctuation">[</span>queues<span class="token punctuation">[</span>minIndex<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">front</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            <span class="token comment">// 更新已经经过的时间和队伍</span>
            queueSum<span class="token punctuation">[</span>minIndex<span class="token punctuation">]</span> <span class="token operator">=</span> minValue<span class="token punctuation">;</span>
            queues<span class="token punctuation">[</span>minIndex<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            queues<span class="token punctuation">[</span>minIndex<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// 这时黄线后的队伍为空，处理黄线内剩余的队伍，分别向后累加即可</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> N<span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token operator">!</span> queues<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">int</span> customer <span class="token operator">=</span> queues<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">front</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token keyword">if</span> <span class="token punctuation">(</span>queueSum<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">&lt;</span> <span class="token number">540</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                queueSum<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">+=</span> times<span class="token punctuation">[</span>customer<span class="token punctuation">]</span><span class="token punctuation">;</span>
                endTime<span class="token punctuation">[</span>customer<span class="token punctuation">]</span> <span class="token operator">=</span> queueSum<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
            <span class="token punctuation">}</span>
            queues<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 按顺序查询某顾客的完成时间</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> Q<span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">int</span> time <span class="token operator">=</span> endTime<span class="token punctuation">[</span>queries<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>time <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            cout <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;Sorry&quot;</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            <span class="token keyword">int</span> hour <span class="token operator">=</span> time <span class="token operator">/</span> <span class="token number">60</span> <span class="token operator">+</span> <span class="token number">8</span><span class="token punctuation">;</span>
            <span class="token keyword">int</span> minute <span class="token operator">=</span> time <span class="token operator">%</span> <span class="token number">60</span><span class="token punctuation">;</span>
            <span class="token comment">// 设置两次以填充输出格式</span>
            cout<span class="token punctuation">.</span><span class="token function">width</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            cout<span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token string">'0'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            cout <span class="token operator">&lt;&lt;</span> fixed <span class="token operator">&lt;&lt;</span> hour <span class="token operator">&lt;&lt;</span> <span class="token string">&quot;:&quot;</span><span class="token punctuation">;</span>
            cout<span class="token punctuation">.</span><span class="token function">width</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            cout<span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token string">'0'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            cout <span class="token operator">&lt;&lt;</span> minute<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>i <span class="token operator">&lt;</span> Q <span class="token operator">-</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            cout <span class="token operator">&lt;&lt;</span> endl<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div></div> <!----></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.20b2d5c1.js" defer></script><script src="/assets/js/4.3d4435c2.js" defer></script><script src="/assets/js/17.f2bb4291.js" defer></script>
  </body>
</html>
