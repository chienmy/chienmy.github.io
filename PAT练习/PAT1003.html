<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>1003 Emergency | Unknown Page</title>
    <meta name="generator" content="VuePress 1.8.2">
    
    <meta name="description" content="404">
    
    <link rel="preload" href="/assets/css/0.styles.2aaeaa15.css" as="style"><link rel="preload" href="/assets/js/app.20b2d5c1.js" as="script"><link rel="preload" href="/assets/js/4.3d4435c2.js" as="script"><link rel="preload" href="/assets/js/7.9b3c79b3.js" as="script"><link rel="prefetch" href="/assets/js/10.dbfe23b4.js"><link rel="prefetch" href="/assets/js/11.c03d523b.js"><link rel="prefetch" href="/assets/js/12.b18b8cab.js"><link rel="prefetch" href="/assets/js/13.4d13f343.js"><link rel="prefetch" href="/assets/js/14.a732792c.js"><link rel="prefetch" href="/assets/js/15.68bfca7e.js"><link rel="prefetch" href="/assets/js/16.4ad6b832.js"><link rel="prefetch" href="/assets/js/17.f2bb4291.js"><link rel="prefetch" href="/assets/js/18.d80c0a21.js"><link rel="prefetch" href="/assets/js/19.ba69fd38.js"><link rel="prefetch" href="/assets/js/2.4f6c7076.js"><link rel="prefetch" href="/assets/js/20.f744bb2a.js"><link rel="prefetch" href="/assets/js/21.c6a8116a.js"><link rel="prefetch" href="/assets/js/22.dda03136.js"><link rel="prefetch" href="/assets/js/23.605e317c.js"><link rel="prefetch" href="/assets/js/3.a4197e99.js"><link rel="prefetch" href="/assets/js/5.d481feb1.js"><link rel="prefetch" href="/assets/js/6.acb57dd8.js"><link rel="prefetch" href="/assets/js/8.2ceb428a.js"><link rel="prefetch" href="/assets/js/9.ea563b07.js">
    <link rel="stylesheet" href="/assets/css/0.styles.2aaeaa15.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="layout-body"><div class="markdown-body content__default"><h1 id="_1003-emergency"><a href="#_1003-emergency" class="header-anchor">#</a> 1003 Emergency</h1> <blockquote><p>As an emergency rescue team leader of a city, you are given a special map of your country. The map shows several scattered cities connected by some roads. Amount of rescue teams in each city and the length of each road between any pair of cities are marked on the map. When there is an emergency call to you from some other city, your job is to lead your men to the place as quickly as possible, and at the mean time, call up as many hands on the way as possible.</p> <h3 id="input-specification"><a href="#input-specification" class="header-anchor">#</a> Input Specification:</h3> <p>Each input file contains one test case. For each test case, the first line contains 4 positive integers: <em>N</em> (≤500) - the number of cities (and the cities are numbered from 0 to <em>N</em>−1), <em>M</em> - the number of roads, <em>C</em>1 and <em>C</em>2 - the cities that you are currently in and that you must save, respectively. The next line contains <em>N</em> integers, where the <em>i</em>-th integer is the number of rescue teams in the <em>i</em>-th city. Then <em>M</em> lines follow, each describes a road with three integers <em>c</em>1, <em>c</em>2 and <em>L</em>, which are the pair of cities connected by a road and the length of that road, respectively. It is guaranteed that there exists at least one path from <em>C</em>1 to <em>C</em>2.</p> <h3 id="output-specification"><a href="#output-specification" class="header-anchor">#</a> Output Specification:</h3> <p>For each test case, print in one line two numbers: the number of different shortest paths between <em>C</em>1 and <em>C</em>2, and the maximum amount of rescue teams you can possibly gather. All the numbers in a line must be separated by exactly one space, and there is no extra space allowed at the end of a line.</p></blockquote> <h2 id="description"><a href="#description" class="header-anchor">#</a> Description</h2> <p>在一张节点和顶点均有权值的图中，给定起点和终点，求出最短路径的数目和相应的各顶点权值之和的最大值。对此可以使用DFS或者Dijsktra最短路径算法。</p> <h2 id="tips"><a href="#tips" class="header-anchor">#</a> Tips</h2> <p>创建<code>vector</code>时就指定大小并初始化：<code>vector&lt;int&gt; teamNum(n, 0)</code></p> <p>自定义排序：</p> <div class="language-cpp extra-class"><pre class="language-cpp"><code><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;algorithm&gt;</span></span>

<span class="token keyword">bool</span> <span class="token function">myCompare</span><span class="token punctuation">(</span><span class="token keyword">int</span> a<span class="token punctuation">,</span> <span class="token keyword">int</span> b<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> a <span class="token operator">&gt;</span> b<span class="token punctuation">;</span>  <span class="token comment">// 降序排序</span>
<span class="token punctuation">}</span>

<span class="token function">sort</span><span class="token punctuation">(</span>v<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> v<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> myCompare<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">// 使用开始和末尾的迭代器以及自定义的排序函数排序</span>
</code></pre></div><h2 id="my-solution"><a href="#my-solution" class="header-anchor">#</a> My Solution</h2> <div class="language-cpp extra-class"><pre class="language-cpp"><code><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;iostream&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;vector&gt;</span></span>
<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;algorithm&gt;</span></span>

<span class="token keyword">using</span> <span class="token keyword">namespace</span> std<span class="token punctuation">;</span>
<span class="token keyword">typedef</span> pair<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token punctuation">,</span> <span class="token keyword">int</span><span class="token operator">&gt;</span> Edge<span class="token punctuation">;</span>  <span class="token comment">// &lt;路径终点, 路径长度&gt;</span>

<span class="token keyword">void</span> <span class="token function">dfs</span><span class="token punctuation">(</span><span class="token keyword">int</span> p<span class="token punctuation">,</span> vector<span class="token operator">&lt;</span>vector<span class="token operator">&lt;</span>Edge<span class="token operator">&gt;&gt;</span> <span class="token operator">&amp;</span>edges<span class="token punctuation">,</span> vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">&gt;</span> <span class="token operator">&amp;</span>vertexs<span class="token punctuation">,</span> vector<span class="token operator">&lt;</span><span class="token keyword">bool</span><span class="token operator">&gt;</span> <span class="token operator">&amp;</span>visited<span class="token punctuation">,</span> <span class="token keyword">int</span> pathLength<span class="token punctuation">,</span> <span class="token keyword">int</span> teamSum<span class="token punctuation">,</span> <span class="token keyword">int</span> target<span class="token punctuation">,</span> vector<span class="token operator">&lt;</span>pair<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token punctuation">,</span> <span class="token keyword">int</span><span class="token operator">&gt;&gt;</span> <span class="token operator">&amp;</span>result<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 如果路径到达终点，保存结果</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>p <span class="token operator">==</span> target<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        result<span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span><span class="token function">make_pair</span><span class="token punctuation">(</span>pathLength<span class="token punctuation">,</span> teamSum<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// 当前节点设为已访问</span>
    visited<span class="token punctuation">[</span>p<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span>vector<span class="token operator">&lt;</span>Edge<span class="token operator">&gt;</span><span class="token operator">::</span>iterator iter <span class="token operator">=</span> edges<span class="token punctuation">[</span>p<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> iter <span class="token operator">!=</span> edges<span class="token punctuation">[</span>p<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token operator">++</span>iter<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 如果下一节点处于未访问状态</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span> visited<span class="token punctuation">[</span>iter<span class="token operator">-&gt;</span>first<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">// 更新路径长度和救援队总数，访问下一节点</span>
            <span class="token function">dfs</span><span class="token punctuation">(</span>iter<span class="token operator">-&gt;</span>first<span class="token punctuation">,</span> edges<span class="token punctuation">,</span> vertexs<span class="token punctuation">,</span> visited<span class="token punctuation">,</span> pathLength <span class="token operator">+</span> iter<span class="token operator">-&gt;</span>second<span class="token punctuation">,</span> teamSum <span class="token operator">+</span> vertexs<span class="token punctuation">[</span>iter<span class="token operator">-&gt;</span>first<span class="token punctuation">]</span><span class="token punctuation">,</span> target<span class="token punctuation">,</span> result<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// 退出当前节点前恢复未访问状态</span>
    visited<span class="token punctuation">[</span>p<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token comment">// 比较结果：路径长度升序，救援队总数降序</span>
<span class="token keyword">bool</span> <span class="token function">compareResult</span><span class="token punctuation">(</span>pair<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token punctuation">,</span> <span class="token keyword">int</span><span class="token operator">&gt;</span> <span class="token operator">&amp;</span>e1<span class="token punctuation">,</span> pair<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token punctuation">,</span> <span class="token keyword">int</span><span class="token operator">&gt;</span> <span class="token operator">&amp;</span>e2<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>e1<span class="token punctuation">.</span>first <span class="token operator">==</span> e2<span class="token punctuation">.</span>first<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> e1<span class="token punctuation">.</span>second <span class="token operator">&gt;</span> e2<span class="token punctuation">.</span>second<span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> e1<span class="token punctuation">.</span>first <span class="token operator">&lt;</span> e2<span class="token punctuation">.</span>first<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">int</span> n<span class="token punctuation">,</span> m<span class="token punctuation">,</span> c1<span class="token punctuation">,</span> c2<span class="token punctuation">;</span>
    cin <span class="token operator">&gt;&gt;</span> n <span class="token operator">&gt;&gt;</span> m <span class="token operator">&gt;&gt;</span> c1 <span class="token operator">&gt;&gt;</span> c2<span class="token punctuation">;</span>
    vector<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token operator">&gt;</span> <span class="token function">teamNum</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> n<span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        cin <span class="token operator">&gt;&gt;</span> teamNum<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    vector<span class="token operator">&lt;</span>vector<span class="token operator">&lt;</span>Edge<span class="token operator">&gt;&gt;</span> <span class="token function">edges</span><span class="token punctuation">(</span>n<span class="token punctuation">,</span> vector<span class="token operator">&lt;</span>Edge<span class="token operator">&gt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> m<span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">int</span> start<span class="token punctuation">,</span> end<span class="token punctuation">,</span> length<span class="token punctuation">;</span>
        cin <span class="token operator">&gt;&gt;</span> start <span class="token operator">&gt;&gt;</span> end <span class="token operator">&gt;&gt;</span> length<span class="token punctuation">;</span>
        edges<span class="token punctuation">[</span>start<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span><span class="token function">make_pair</span><span class="token punctuation">(</span>end<span class="token punctuation">,</span> length<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        edges<span class="token punctuation">[</span>end<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">push_back</span><span class="token punctuation">(</span><span class="token function">make_pair</span><span class="token punctuation">(</span>start<span class="token punctuation">,</span> length<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    vector<span class="token operator">&lt;</span><span class="token keyword">bool</span><span class="token operator">&gt;</span> <span class="token function">visited</span><span class="token punctuation">(</span>n<span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    vector<span class="token operator">&lt;</span>pair<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token punctuation">,</span> <span class="token keyword">int</span><span class="token operator">&gt;&gt;</span> result<span class="token punctuation">;</span>
    <span class="token comment">// DFS</span>
    <span class="token function">dfs</span><span class="token punctuation">(</span>c1<span class="token punctuation">,</span> edges<span class="token punctuation">,</span> teamNum<span class="token punctuation">,</span> visited<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> teamNum<span class="token punctuation">[</span>c1<span class="token punctuation">]</span><span class="token punctuation">,</span> c2<span class="token punctuation">,</span> result<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 对结果进行排序，所需结果放在第一个</span>
    <span class="token function">sort</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> result<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> compareResult<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 计算最短路径总数</span>
    <span class="token keyword">int</span> pathNum <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span>vector<span class="token operator">&lt;</span>pair<span class="token operator">&lt;</span><span class="token keyword">int</span><span class="token punctuation">,</span> <span class="token keyword">int</span><span class="token operator">&gt;&gt;</span><span class="token operator">::</span>iterator iter <span class="token operator">=</span> result<span class="token punctuation">.</span><span class="token function">begin</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> iter <span class="token operator">!=</span> result<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token operator">++</span>iter<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>iter<span class="token operator">-&gt;</span>first <span class="token operator">==</span> result<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>first<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            pathNum<span class="token operator">++</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    cout <span class="token operator">&lt;&lt;</span> pathNum <span class="token operator">&lt;&lt;</span> <span class="token string">&quot; &quot;</span> <span class="token operator">&lt;&lt;</span> result<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">.</span>second<span class="token punctuation">;</span>

    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="review"><a href="#review" class="header-anchor">#</a> Review</h2> <p>错误：</p> <ul><li><p>邻接表模型使用时未注意到图是无向图</p></li> <li><p>DFS模板使用不熟练，在设置/恢复节点的访问状态时出错</p></li> <li><p>审题错误，未注意到是求最短路径的数目</p></li></ul> <p>改进：</p> <ul><li>最短路径和最大救援队总数可以在DFS过程中更新，后面无需再次排序</li> <li>可以换Dijsktra最短路径算法来做</li></ul> <h2 id="reference"><a href="#reference" class="header-anchor">#</a> Reference</h2> <p><a href="https://www.cnblogs.com/549294286/p/3571448.html" target="_blank" rel="noopener noreferrer">PAT 解题报告 1003. Emergency (25)<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></div> <!----></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.20b2d5c1.js" defer></script><script src="/assets/js/4.3d4435c2.js" defer></script><script src="/assets/js/7.9b3c79b3.js" defer></script>
  </body>
</html>
